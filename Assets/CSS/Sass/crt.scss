$blur-amount: 10px;
$bg-color: #121010;

:root {
  --bg-color: #{$bg-color};
  --crt-position: 0%;
}

@property --crt-position {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 0%;
}

.crt-container {
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;

  &::before {
    content: "";
    position: absolute;
    inset: 0;
    background-image: linear-gradient(
      0deg,
      transparent,
      rgba(255, 255, 255, 0.4) 30px,
      transparent 60px
    );
    background-size: 100% var(--crt-position);
    background-repeat: no-repeat;
    filter: blur($blur-amount) hue-rotate(90deg);
    pointer-events: none;
    animation: move 16s linear 4s infinite reverse;
  }

  &::after {
    content: "";
    position: absolute;
    inset: 0;
    background-image: 
      linear-gradient(
        rgba(18, 16, 16, 0) 50%,
        rgba(0, 0, 0, 0.25) 50%
      ),
      linear-gradient(
        90deg,
        rgba(255, 0, 0, 0.06),
        rgba(0, 255, 0, 0.02),
        rgba(0, 0, 255, 0.06)
      );
    background-size: 100% 5px, 3px 100%;
    pointer-events: none;
    animation: flicker 0.15s infinite;
  }
}

@keyframes move {
  0%, 28% { opacity: 0; --crt-position: 100%; }
  30%, 58% { opacity: 0; }
  60%, 100% { opacity: 0; --crt-position: 0%; }
}

@keyframes flicker {
  0%   { opacity: 0.25; }
  15%  { opacity: 0.65; }
  25%  { opacity: 0.58; }
  45%  { opacity: 0.60; }
  50%  { opacity: 0.70; }
  55%  { opacity: 0.30; }
  65%  { opacity: 0.52; }
  85%  { opacity: 0.50; }
  100% { opacity: 0.28; }
}
